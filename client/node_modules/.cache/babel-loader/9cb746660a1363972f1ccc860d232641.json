{"ast":null,"code":"import _slicedToArray from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */import React,{useState,useEffect,useRef}from\"react\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Axios from\"axios\";import{config,CREATE_POST_URL}from\"../config/constants\";// Material-UI deps\nimport Stepper from\"@material-ui/core/Stepper\";import Step from\"@material-ui/core/Step\";import StepLabel from\"@material-ui/core/StepLabel\";import StepContent from\"@material-ui/core/StepContent\";import Button from\"@material-ui/core/Button\";import Paper from\"@material-ui/core/Paper\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import CircularProgress from\"@material-ui/core/CircularProgress\";import Fade from\"@material-ui/core/Fade\";import Alert from\"@material-ui/lab/Alert\";// FilePond deps\nimport{FilePond,registerPlugin}from\"react-filepond\";import\"filepond/dist/filepond.min.css\";import FilePondPluginImagePreview from\"filepond-plugin-image-preview\";import\"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";import FilePondPluginFileEncode from\"filepond-plugin-file-encode\";import FilePondPluginImageResize from\"filepond-plugin-image-resize\";import FilePondPluginImageTransform from\"filepond-plugin-image-transform\";import FilePondPluginFileValidateType from\"filepond-plugin-file-validate-type\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";registerPlugin(FilePondPluginImagePreview,FilePondPluginFileEncode,FilePondPluginImageResize,FilePondPluginImageTransform,FilePondPluginFileValidateType);// General Style\nvar useStyles=makeStyles(function(theme){return{root:{width:\"70%\",margin:\"40px auto\"},filesContainer:{maxWidth:\"500px\",margin:\"auto\"},button:{marginTop:theme.spacing(1),marginRight:theme.spacing(1)},actionsContainer:{width:\"30%\",margin:\"auto\",marginBottom:theme.spacing(2)},resetContainer:{padding:\"6px 24px\"},TextField:{margin:\"10px 0px\"},reviewRoot:{maxWidth:400,flexGrow:1,margin:\"10px auto\"},reviewImg:{height:255,display:\"block\",maxWidth:400,overflow:\"hidden\",width:\"100%\"},reviewBottom:{display:\"flex\",alignItems:\"center\",height:50,paddingLeft:theme.spacing(4),backgroundColor:theme.palette.background.default},finishStyle:{width:\"fit-content\",margin:\"auto\"}};});function getSteps(){return[\"Select you image\",\"Tag a Friend\",\"Submit the post\"];}var CreatePoste=function CreatePoste(){var classes=useStyles();var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),caption=_useState4[0],setCaption=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),activeStep=_useState6[0],setActiveStep=_useState6[1];var steps=getSteps();var _useState7=useState(\"idle\"),_useState8=_slicedToArray(_useState7,2),query=_useState8[0],setQuery=_useState8[1];var timerRef=useRef();useEffect(function(){return function(){clearTimeout(timerRef.current);};},[]);var PostData=function PostData(){// the Index 0 means the first file , we will add in the future the support of multiple\n// images upload , the max will be 10 images per post\nvar photoEncode=files[0].getFileEncodeBase64String();var photoType=files[0].fileType;Axios.post(CREATE_POST_URL,{title:caption,body:caption,photoEncode:photoEncode,photoType:photoType},config).then(function(rep){if(rep.data.message){setQuery(\"success\");}});};var getStepContent=function getStepContent(step){switch(step){case 0:return/*#__PURE__*/_jsxs(\"div\",{className:classes.filesContainer,children:[/*#__PURE__*/_jsx(FilePond,{labelIdle:\"Drag & Drop your picture or <span class=\\\"filepond--label-action\\\">Browse</span>\",files:files,allowMultiple:false,onupdatefiles:setFiles,imageResizeTargetWidth:450,imageResizeTargetHeight:450,acceptedFileTypes:[\"image/jpeg\",\"image/png\",\"images/gif\"],required:true}),/*#__PURE__*/_jsx(TextField,{className:classes.TextField,id:\"outlined-search\",label:\"Caption\",type:\"text\",variant:\"outlined\",fullWidth:\"true\",multiline:\"true\",value:caption,onChange:function onChange(e){return setCaption(e.target.value);}})]});case 1:return\"This functionality isn't available for the moment\";case 2:return;default:return\"Unknown step\";}};var handleNext=function handleNext(){setActiveStep(function(prevActiveStep){return prevActiveStep+1;});};var handleBack=function handleBack(){setActiveStep(function(prevActiveStep){return prevActiveStep-1;});};var handleClickQuery=function handleClickQuery(){clearTimeout(timerRef.current);if(query!==\"idle\"){setQuery(\"idle\");return;}setQuery(\"progress\");timerRef.current=setTimeout(function(){history.push(\"/\");},4000);};var handleSubmit=function handleSubmit(){handleNext();handleClickQuery();PostData();};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Stepper,{component:Paper,elevation:3,activeStep:activeStep,orientation:\"vertical\",children:[steps.map(function(label,index){return/*#__PURE__*/_jsxs(Step,{children:[/*#__PURE__*/_jsx(StepLabel,{children:label}),/*#__PURE__*/_jsxs(StepContent,{children:[/*#__PURE__*/_jsx(Typography,{children:getStepContent(index)}),/*#__PURE__*/_jsx(\"div\",{className:classes.actionsContainer,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{disabled:activeStep===0,onClick:handleBack,className:classes.button,children:\"Back\"}),/*#__PURE__*/_jsx(Button,{disabled:files.length===0||caption===\"\",variant:\"contained\",color:\"primary\",onClick:activeStep===steps.length-1?handleSubmit:handleNext,className:classes.button,children:activeStep===steps.length-1?\"Submit\":\"Next\"})]})})]})]},label);}),activeStep===steps.length&&/*#__PURE__*/_jsx(Paper,{square:true,elevation:0,className:classes.resetContainer,children:/*#__PURE__*/_jsx(\"div\",{className:classes.finishStyle,children:query===\"success\"?/*#__PURE__*/_jsx(Alert,{variant:\"outlined\",severity:\"success\",children:\"Your post has been successfully submitted \\u2014 check it out!\"}):/*#__PURE__*/_jsx(Fade,{className:classes.finishStyle,in:query===\"progress\",style:{transitionDelay:query===\"progress\"?\"100ms\":\"0ms\"},unmountOnExit:true,children:/*#__PURE__*/_jsx(CircularProgress,{})})})})]})});};export default CreatePoste;","map":{"version":3,"sources":["/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/src/screens/CreatePost.js"],"names":["React","useState","useEffect","useRef","useHistory","makeStyles","Axios","config","CREATE_POST_URL","Stepper","Step","StepLabel","StepContent","Button","Paper","Typography","TextField","CircularProgress","Fade","Alert","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileEncode","FilePondPluginImageResize","FilePondPluginImageTransform","FilePondPluginFileValidateType","useStyles","theme","root","width","margin","filesContainer","maxWidth","button","marginTop","spacing","marginRight","actionsContainer","marginBottom","resetContainer","padding","reviewRoot","flexGrow","reviewImg","height","display","overflow","reviewBottom","alignItems","paddingLeft","backgroundColor","palette","background","default","finishStyle","getSteps","CreatePoste","classes","history","files","setFiles","caption","setCaption","activeStep","setActiveStep","steps","query","setQuery","timerRef","clearTimeout","current","PostData","photoEncode","getFileEncodeBase64String","photoType","fileType","post","title","body","then","rep","data","message","getStepContent","step","e","target","value","handleNext","prevActiveStep","handleBack","handleClickQuery","setTimeout","push","handleSubmit","map","label","index","length","transitionDelay"],"mappings":"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","sourcesContent":["/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Axios from \"axios\";\nimport { config, CREATE_POST_URL } from \"../config/constants\";\n// Material-UI deps\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Fade from \"@material-ui/core/Fade\";\nimport Alert from \"@material-ui/lab/Alert\";\n// FilePond deps\nimport { FilePond, registerPlugin } from \"react-filepond\";\nimport \"filepond/dist/filepond.min.css\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\nimport FilePondPluginFileEncode from \"filepond-plugin-file-encode\";\nimport FilePondPluginImageResize from \"filepond-plugin-image-resize\";\nimport FilePondPluginImageTransform from \"filepond-plugin-image-transform\";\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\n\nregisterPlugin(\n\tFilePondPluginImagePreview,\n\tFilePondPluginFileEncode,\n\tFilePondPluginImageResize,\n\tFilePondPluginImageTransform,\n\tFilePondPluginFileValidateType\n);\n\n// General Style\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"70%\",\n\t\tmargin: \"40px auto\",\n\t},\n\tfilesContainer: { maxWidth: \"500px\", margin: \"auto\" },\n\tbutton: {\n\t\tmarginTop: theme.spacing(1),\n\t\tmarginRight: theme.spacing(1),\n\t},\n\tactionsContainer: {\n\t\twidth: \"30%\",\n\t\tmargin: \"auto\",\n\t\tmarginBottom: theme.spacing(2),\n\t},\n\tresetContainer: {\n\t\tpadding: \"6px 24px\",\n\t},\n\tTextField: {\n\t\tmargin: \"10px 0px\",\n\t},\n\treviewRoot: {\n\t\tmaxWidth: 400,\n\t\tflexGrow: 1,\n\t\tmargin: \"10px auto\",\n\t},\n\treviewImg: {\n\t\theight: 255,\n\t\tdisplay: \"block\",\n\t\tmaxWidth: 400,\n\t\toverflow: \"hidden\",\n\t\twidth: \"100%\",\n\t},\n\treviewBottom: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\theight: 50,\n\t\tpaddingLeft: theme.spacing(4),\n\t\tbackgroundColor: theme.palette.background.default,\n\t},\n\tfinishStyle: {\n\t\twidth: \"fit-content\",\n\t\tmargin: \"auto\",\n\t},\n}));\n\nfunction getSteps() {\n\treturn [\"Select you image\", \"Tag a Friend\", \"Submit the post\"];\n}\n\nconst CreatePoste = () => {\n\tconst classes = useStyles();\n\tconst history = useHistory();\n\tconst [files, setFiles] = useState([]);\n\tconst [caption, setCaption] = useState(\"\");\n\tconst [activeStep, setActiveStep] = useState(0);\n\tconst steps = getSteps();\n\n\tconst [query, setQuery] = useState(\"idle\");\n\tconst timerRef = useRef();\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\tclearTimeout(timerRef.current);\n\t\t},\n\t\t[]\n\t);\n\n\tconst PostData = () => {\n\t\t// the Index 0 means the first file , we will add in the future the support of multiple\n\t\t// images upload , the max will be 10 images per post\n\t\tconst photoEncode = files[0].getFileEncodeBase64String();\n\t\tconst photoType = files[0].fileType;\n\t\tAxios.post(\n\t\t\tCREATE_POST_URL,\n\t\t\t{\n\t\t\t\ttitle: caption,\n\t\t\t\tbody: caption,\n\t\t\t\tphotoEncode,\n\t\t\t\tphotoType,\n\t\t\t},\n\t\t\tconfig\n\t\t).then((rep) => {\n\t\t\tif (rep.data.message) {\n\t\t\t\tsetQuery(\"success\");\n\t\t\t}\n\t\t});\n\t};\n\n\tconst getStepContent = (step) => {\n\t\tswitch (step) {\n\t\t\tcase 0:\n\t\t\t\treturn (\n\t\t\t\t\t<div className={classes.filesContainer}>\n\t\t\t\t\t\t<FilePond\n\t\t\t\t\t\t\tlabelIdle='Drag & Drop your picture or <span class=\"filepond--label-action\">Browse</span>'\n\t\t\t\t\t\t\tfiles={files}\n\t\t\t\t\t\t\tallowMultiple={false}\n\t\t\t\t\t\t\tonupdatefiles={setFiles}\n\t\t\t\t\t\t\timageResizeTargetWidth={450}\n\t\t\t\t\t\t\timageResizeTargetHeight={450}\n\t\t\t\t\t\t\tacceptedFileTypes={[\"image/jpeg\", \"image/png\", \"images/gif\"]}\n\t\t\t\t\t\t\trequired={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tclassName={classes.TextField}\n\t\t\t\t\t\t\tid=\"outlined-search\"\n\t\t\t\t\t\t\tlabel=\"Caption\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tfullWidth=\"true\"\n\t\t\t\t\t\t\tmultiline=\"true\"\n\t\t\t\t\t\t\tvalue={caption}\n\t\t\t\t\t\t\tonChange={(e) => setCaption(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase 1:\n\t\t\t\treturn \"This functionality isn't available for the moment\";\n\t\t\tcase 2:\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\treturn \"Unknown step\";\n\t\t}\n\t};\n\n\tconst handleNext = () => {\n\t\tsetActiveStep((prevActiveStep) => prevActiveStep + 1);\n\t};\n\n\tconst handleBack = () => {\n\t\tsetActiveStep((prevActiveStep) => prevActiveStep - 1);\n\t};\n\n\tconst handleClickQuery = () => {\n\t\tclearTimeout(timerRef.current);\n\t\tif (query !== \"idle\") {\n\t\t\tsetQuery(\"idle\");\n\t\t\treturn;\n\t\t}\n\t\tsetQuery(\"progress\");\n\t\ttimerRef.current = setTimeout(() => {\n\t\t\thistory.push(\"/\");\n\t\t}, 4000);\n\t};\n\n\tconst handleSubmit = () => {\n\t\thandleNext();\n\t\thandleClickQuery();\n\t\tPostData();\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Stepper component={Paper} elevation={3} activeStep={activeStep} orientation=\"vertical\">\n\t\t\t\t{steps.map((label, index) => (\n\t\t\t\t\t<Step key={label}>\n\t\t\t\t\t\t<StepLabel>{label}</StepLabel>\n\t\t\t\t\t\t<StepContent>\n\t\t\t\t\t\t\t<Typography>{getStepContent(index)}</Typography>\n\t\t\t\t\t\t\t<div className={classes.actionsContainer}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tdisabled={activeStep === 0}\n\t\t\t\t\t\t\t\t\t\tonClick={handleBack}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tdisabled={files.length === 0 || caption === \"\"}\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={activeStep === steps.length - 1 ? handleSubmit : handleNext}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{activeStep === steps.length - 1 ? \"Submit\" : \"Next\"}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</StepContent>\n\t\t\t\t\t</Step>\n\t\t\t\t))}\n\t\t\t\t{activeStep === steps.length && (\n\t\t\t\t\t<Paper square elevation={0} className={classes.resetContainer}>\n\t\t\t\t\t\t<div className={classes.finishStyle}>\n\t\t\t\t\t\t\t{query === \"success\" ? (\n\t\t\t\t\t\t\t\t<Alert variant=\"outlined\" severity=\"success\">\n\t\t\t\t\t\t\t\t\tYour post has been successfully submitted â€” check it out!\n\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Fade\n\t\t\t\t\t\t\t\t\tclassName={classes.finishStyle}\n\t\t\t\t\t\t\t\t\tin={query === \"progress\"}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\ttransitionDelay: query === \"progress\" ? \"100ms\" : \"0ms\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tunmountOnExit\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t\t\t</Fade>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Paper>\n\t\t\t\t)}\n\t\t\t</Stepper>\n\t\t</div>\n\t);\n};\n\nexport default CreatePoste;\n"]},"metadata":{},"sourceType":"module"}