{"ast":null,"code":"import _slicedToArray from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */import React,{useState,useRef,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import axios from\"axios\";import{RESET_PWD_URL}from\"../config/constants\";import Copyright from\"../components/Copyight\";// Material-UI Components\nimport Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import Grid from\"@material-ui/core/Grid\";import Box from\"@material-ui/core/Box\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import Alert from\"@material-ui/lab/Alert\";// General Styles\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{height:\"-webkit-fill-available\"},image:{backgroundSize:\"cover\",backgroundColor:\"#fafafa\",backgroundImage:\"url(https://source.unsplash.com/random)\",backgroundRepeat:\"no-repeat\",backgroundPosition:\"center\"},container:{margin:\" auto 0px\"},Logo:{fontFamily:\"Grand Hotel, cursive\",margin:\"40px 0px\"},paper:{marginTop:\"50px\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});var Reset=function Reset(){var history=useHistory();var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),emailCheck=_useState4[0],setEmailCheck=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),errorMsg=_useState6[0],setErrorMsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),successMsg=_useState8[0],setSuccessMsg=_useState8[1];var timerRef=useRef();useEffect(function(){return function(){clearTimeout(timerRef.current);};},[]);var PostData=function PostData(){// the Regex email validation was token from : https://emailregex.com/\nif(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){axios.post(RESET_PWD_URL,{email:email}).then(function(res){var data=res.data;console.log(data);if(data.error){setEmailCheck(false);setErrorMsg(true);}else{// make sure to not display another Alert instead\nsetEmailCheck(false);setErrorMsg(false);// show the confirmation message\nsetSuccessMsg(true);// set a time before we redirect the user to login page\ntimerRef.current=setTimeout(function(){history.push(\"/login\");},3000);}}).catch(function(err){console.log(err);});}else{setErrorMsg(false);setEmailCheck(true);}};return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.root,children:[/*#__PURE__*/_jsx(Grid,{className:classes.image,item:true,sm:4,md:6}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:8,md:6,className:classes.container,children:/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",style:{paddingBottom:\"64px\"},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{className:classes.Logo,variant:\"h2\",gutterBottom:true,style:{fontFamily:\"Grand Hotel, cursive \"},children:\"Kalyan Somalaraju\"}),emailCheck?/*#__PURE__*/_jsx(Alert,{variant:\"outlined\",severity:\"error\",children:\"Invalid Email format \\u2014 check it out!\"}):null,errorMsg?/*#__PURE__*/_jsx(Alert,{variant:\"outlined\",severity:\"error\",children:\"No User exists with that email \\u2014 check it Again !\"}):null,successMsg?/*#__PURE__*/_jsx(Alert,{variant:\"outlined\",severity:\"success\",children:\"The reset password link has been sent \\u2014 check out your email inbox !\"}):null,/*#__PURE__*/_jsxs(\"form\",{className:classes.form,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"Email Address\",name:\"email\",autoFocus:true,value:email,onChange:function onChange(e){setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,disabled:email!==\"\"?false:true,onClick:function onClick(){return PostData();},children:\"Reset your Password\"})]})]}),/*#__PURE__*/_jsx(Box,{mt:8,children:/*#__PURE__*/_jsx(Copyright,{})})]})})]});};export default Reset;","map":{"version":3,"sources":["/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/src/screens/ResetPassword.js"],"names":["React","useState","useRef","useEffect","Link","useHistory","axios","RESET_PWD_URL","Copyright","Button","CssBaseline","TextField","Grid","Box","Typography","makeStyles","Container","Alert","useStyles","theme","root","height","image","backgroundSize","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","container","margin","Logo","fontFamily","paper","marginTop","display","flexDirection","alignItems","form","width","spacing","submit","Reset","history","classes","email","setEmail","emailCheck","setEmailCheck","errorMsg","setErrorMsg","successMsg","setSuccessMsg","timerRef","clearTimeout","current","PostData","test","post","then","res","data","console","log","error","setTimeout","push","catch","err","paddingBottom","e","target","value"],"mappings":"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","sourcesContent":["/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { RESET_PWD_URL } from \"../config/constants\";\nimport Copyright from \"../components/Copyight\";\n// Material-UI Components\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Alert from \"@material-ui/lab/Alert\";\n\n// General Styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\theight: \"-webkit-fill-available\",\n\t},\n\timage: {\n\t\tbackgroundSize: \"cover\",\n\t\tbackgroundColor: \"#fafafa\",\n\t\tbackgroundImage: \"url(https://source.unsplash.com/random)\",\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundPosition: \"center\",\n\t},\n\tcontainer: {\n\t\tmargin: \" auto 0px\",\n\t},\n\tLogo: {\n\t\tfontFamily: \"Grand Hotel, cursive\",\n\t\tmargin: \"40px 0px\",\n\t},\n\tpaper: {\n\t\tmarginTop: \"50px\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t},\n\n\tform: {\n\t\twidth: \"100%\", // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nconst Reset = () => {\n\tconst history = useHistory();\n\tconst classes = useStyles();\n\tconst [email, setEmail] = useState(\"\");\n\n\tconst [emailCheck, setEmailCheck] = useState(false);\n\tconst [errorMsg, setErrorMsg] = useState(false);\n\tconst [successMsg, setSuccessMsg] = useState(false);\n\n\tconst timerRef = useRef();\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\tclearTimeout(timerRef.current);\n\t\t},\n\t\t[]\n\t);\n\n\tconst PostData = () => {\n\t\t// the Regex email validation was token from : https://emailregex.com/\n\t\tif (\n\t\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n\t\t\t\temail\n\t\t\t)\n\t\t) {\n\t\t\taxios.post(RESET_PWD_URL, { email })\n\t\t\t\t.then((res) => {\n\t\t\t\t\tconst data = res.data;\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\tsetEmailCheck(false);\n\t\t\t\t\t\tsetErrorMsg(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// make sure to not display another Alert instead\n\t\t\t\t\t\tsetEmailCheck(false);\n\t\t\t\t\t\tsetErrorMsg(false);\n\t\t\t\t\t\t// show the confirmation message\n\t\t\t\t\t\tsetSuccessMsg(true);\n\t\t\t\t\t\t// set a time before we redirect the user to login page\n\t\t\t\t\t\ttimerRef.current = setTimeout(() => {\n\t\t\t\t\t\t\thistory.push(\"/login\");\n\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tsetErrorMsg(false);\n\t\t\tsetEmailCheck(true);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Grid container className={classes.root}>\n\t\t\t<Grid className={classes.image} item sm={4} md={6} />\n\t\t\t<Grid item xs={12} sm={8} md={6} className={classes.container}>\n\t\t\t\t<Container component=\"main\" maxWidth=\"xs\" style={{ paddingBottom: \"64px\" }}>\n\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tclassName={classes.Logo}\n\t\t\t\t\t\t\tvariant=\"h2\"\n\t\t\t\t\t\t\tgutterBottom\n\t\t\t\t\t\t\tstyle={{ fontFamily: \"Grand Hotel, cursive \" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tKalyan Somalaraju\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{emailCheck ? (\n\t\t\t\t\t\t\t<Alert variant=\"outlined\" severity=\"error\">\n\t\t\t\t\t\t\t\tInvalid Email format — check it out!\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{errorMsg ? (\n\t\t\t\t\t\t\t<Alert variant=\"outlined\" severity=\"error\">\n\t\t\t\t\t\t\t\tNo User exists with that email — check it Again !\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{successMsg ? (\n\t\t\t\t\t\t\t<Alert variant=\"outlined\" severity=\"success\">\n\t\t\t\t\t\t\t\tThe reset password link has been sent — check out your email inbox !\n\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetEmail(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\t\tdisabled={email !== \"\" ? false : true}\n\t\t\t\t\t\t\t\tonClick={() => PostData()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tReset your Password\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Box mt={8}>\n\t\t\t\t\t\t<Copyright />\n\t\t\t\t\t</Box>\n\t\t\t\t</Container>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n};\n\nexport default Reset;\n"]},"metadata":{},"sourceType":"module"}