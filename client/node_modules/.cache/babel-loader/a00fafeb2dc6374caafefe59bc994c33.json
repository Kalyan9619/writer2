{"ast":null,"code":"import _slicedToArray from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */import React,{useState,useEffect,useContext}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{UserContext}from\"../App\";import{config,SUB_POST_URL}from\"../config/constants\";// Material-UI Components\nimport{makeStyles}from\"@material-ui/core/styles\";import Card from\"@material-ui/core/Card\";import CardHeader from\"@material-ui/core/CardHeader\";import CardMedia from\"@material-ui/core/CardMedia\";import CardContent from\"@material-ui/core/CardContent\";import CardActions from\"@material-ui/core/CardActions\";import Avatar from\"@material-ui/core/Avatar\";import TextField from\"@material-ui/core/TextField\";import IconButton from\"@material-ui/core/IconButton\";import Typography from\"@material-ui/core/Typography\";import Divider from\"@material-ui/core/Divider\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import FavoriteIcon from\"@material-ui/icons/Favorite\";import FavoriteBorderIcon from\"@material-ui/icons/FavoriteBorder\";import ChatBubbleOutlineIcon from\"@material-ui/icons/ChatBubbleOutline\";import SendIcon from\"@material-ui/icons/Send\";import DoubleArrowIcon from\"@material-ui/icons/DoubleArrow\";// General styles\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{maxWidth:500,margin:\"20px auto\",\"& .MuiTextField-root\":{width:\"100%\"},\"& .MuiOutlinedInput-multiline\":{paddingTop:\"8px\",paddingBottom:\"8px\",marginTop:\"5px\",marginLeft:\"5px\",marginRight:\"5px\"},\"& .MuiCardContent-root:last-child\":{paddingBottom:\"10px\"},\"& .MuiDivider-middle\":{marginBottom:\"4px\"},\"& .MuiListItem-root\":{padding:\"0px 16px\"},\"& .MuiCardContent-root\":{paddingTop:\"0px\",paddingBottom:\"5px\"},\"& .MuiIconButton-root:focus\":{backgroundColor:\"rgba(0, 0, 0, 0)\"}},header:{padding:\"10px\"},media:{//height: 0,\npaddingTop:\"56.25%\",// 16:9\nheight:\"max-content\"},likeBar:{height:\"25px\",paddingTop:\"0px\",marginTop:\"8px\",marginLeft:\"2px\",paddingLeft:\"0px\",paddingBottom:\"4px\"},comments:{display:\"flex\",paddingTop:\"0px\",paddingLeft:\"12px\",paddingRight:\"0px\"},comment_item_see_more:{width:\"35%\",cursor:\"pointer\"},comments_icon_see_more:{height:\"17px\",width:\"17px\",paddingTop:\"4px\",paddingBottom:\"3px\"},comments_icon:{height:\"30px\",paddingLeft:\"0px\",paddingTop:\"13px\",paddingRight:\"8px\",paddingBottom:\"0px\"},inline:{display:\"inline\",fontWeight:\"600\"},avatar:{height:\"40px\"},links:{textDecoration:\"none\"}};});var SubscribePost=function SubscribePost(){var classes=useStyles();var _useContext=useContext(UserContext),state=_useContext.state;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showSend=_useState4[0],setShowSend=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];useEffect(function(){axios.get(SUB_POST_URL,config).then(function(res){console.log(res.data.posts);setData(res.data.posts);});},[]);var likePost=function likePost(id){axios.put(\"http://localhost:5000/like\",{postId:id},config).then(function(result){var newData=data.map(function(item){if(result.data._id===item._id)return result.data;else return item;});setData(newData);}).catch(function(err){return console.log(err);});};var UnlikePost=function UnlikePost(id){axios.put(\"http://localhost:5000/Unlike\",{postId:id},config).then(function(res){var newData=data.map(function(item){if(res.data._id===item._id)return res.data;else return item;});setData(newData);}).catch(function(err){return console.log(err);});};var makeComment=function makeComment(text,postId){setComment(\"\");axios.put(\"http://localhost:5000/comment\",{text:text,postId:postId},config).then(function(result){var newData=data.map(function(item){if(result.data._id===item._id)return result.data;else return item;});setData(newData);}).catch(function(err){return console.log(err);});};var deletePost=function deletePost(postId){axios.delete(\"http://localhost:5000/deletepost/\".concat(postId),config).then(function(res){var newData=data.filter(function(item){return item._id!==res.data;});setData(newData);});};return data.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:/*#__PURE__*/_jsxs(Card,{className:classes.root,children:[/*#__PURE__*/_jsx(CardHeader,{className:classes.header,avatar:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(\"img\",{className:classes.avatar,alt:\"\",src:\"data:\".concat(item.PhotoType,\";base64,\").concat(item.Photo)})}),title:/*#__PURE__*/_jsx(Link,{className:classes.links,to:item.PostedBy._id!==state._id?\"/profile/\".concat(item.PostedBy._id):\"/profile\",children:item.PostedBy.Name}),subheader:\"September 14, 2016\"}),/*#__PURE__*/_jsx(CardMedia,{className:classes.media,image:\"data:\".concat(item.PhotoType,\";base64,\").concat(item.Photo),title:\"Paella dish\"}),/*#__PURE__*/_jsxs(CardActions,{className:classes.likeBar,disableSpacing:true,children:[item.Likes.includes(state._id)?/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Like\",color:\"secondary\",onClick:function onClick(){UnlikePost(item._id);},children:/*#__PURE__*/_jsx(FavoriteIcon,{})}):/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Like\",onClick:function onClick(){likePost(item._id);},children:/*#__PURE__*/_jsx(FavoriteBorderIcon,{})}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"comments\",children:/*#__PURE__*/_jsx(ChatBubbleOutlineIcon,{})})]}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",display:\"block\",gutterBottom:true,children:[item.Likes.length,\" Likes\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\",children:item.Body})]}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsxs(List,{children:[item.Comments.map(function(cmt){return/*#__PURE__*/_jsx(ListItem,{className:classes.comment_item,alignItems:\"flex-start\",children:/*#__PURE__*/_jsx(ListItemText,{secondary:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{component:\"span\",variant:\"body2\",className:classes.inline,color:\"textPrimary\",children:/*#__PURE__*/_jsx(Link,{className:classes.links,to:cmt.PostedBy._id!==state._id?\"/profile/\".concat(cmt.PostedBy._id):\"/profile\",children:cmt.PostedBy.Name})}),\" â€” \",cmt.Text]})})},cmt._id);}),item.Comments.length===0?/*#__PURE__*/_jsx(ListItem,{alignItems:\"flex-start\",style:{left:\"38%\"},children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",gutterBottom:true,children:\"No Comments yet\"})}):null,item.Comments.length>3&&item.Comments.length!==0?/*#__PURE__*/_jsxs(ListItem,{alignItems:\"flex-start\",className:classes.comment_item_see_more,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",display:\"block\",gutterBottom:true,children:[\"See all \",item.Comments.length,\" comments\"]}),/*#__PURE__*/_jsx(DoubleArrowIcon,{className:classes.comments_icon_see_more})]}):null]}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsxs(CardContent,{className:classes.comments,children:[/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(\"img\",{className:classes.avatar,alt:\"\",src:\"https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\"})}),/*#__PURE__*/_jsx(TextField,{multiline:true,rows:1,placeholder:\"Add your comment...\",variant:\"outlined\",value:comment,onChange:function onChange(event){event.preventDefault();setComment(event.target.value);setShowSend(true);if(event.target.value===\"\")setShowSend(false);}}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"add to favorites\",className:classes.comments_icon,disabled:!showSend,onClick:function onClick(){return makeComment(comment,item._id);},children:/*#__PURE__*/_jsx(SendIcon,{})})]})]})},item._id);});};export default SubscribePost;","map":{"version":3,"sources":["/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/src/screens/SubscribePosts.js"],"names":["React","useState","useEffect","useContext","Link","axios","UserContext","config","SUB_POST_URL","makeStyles","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","TextField","IconButton","Typography","Divider","List","ListItem","ListItemText","FavoriteIcon","FavoriteBorderIcon","ChatBubbleOutlineIcon","SendIcon","DoubleArrowIcon","useStyles","theme","root","maxWidth","margin","width","paddingTop","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","padding","backgroundColor","header","media","height","likeBar","paddingLeft","comments","display","paddingRight","comment_item_see_more","cursor","comments_icon_see_more","comments_icon","inline","fontWeight","avatar","links","textDecoration","SubscribePost","classes","state","data","setData","showSend","setShowSend","comment","setComment","get","then","res","console","log","posts","likePost","id","put","postId","result","newData","map","item","_id","catch","err","UnlikePost","makeComment","text","deletePost","delete","filter","PhotoType","Photo","PostedBy","Name","Likes","includes","length","Body","Comments","cmt","comment_item","Text","left","event","preventDefault","target","value"],"mappings":"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","sourcesContent":["/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { UserContext } from \"../App\";\nimport { config, SUB_POST_URL } from \"../config/constants\";\n// Material-UI Components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport TextField from \"@material-ui/core/TextField\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport ChatBubbleOutlineIcon from \"@material-ui/icons/ChatBubbleOutline\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport DoubleArrowIcon from \"@material-ui/icons/DoubleArrow\";\n\n// General styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tmaxWidth: 500,\n\t\tmargin: \"20px auto\",\n\t\t\"& .MuiTextField-root\": {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\t\"& .MuiOutlinedInput-multiline\": {\n\t\t\tpaddingTop: \"8px\",\n\t\t\tpaddingBottom: \"8px\",\n\t\t\tmarginTop: \"5px\",\n\t\t\tmarginLeft: \"5px\",\n\t\t\tmarginRight: \"5px\",\n\t\t},\n\t\t\"& .MuiCardContent-root:last-child\": {\n\t\t\tpaddingBottom: \"10px\",\n\t\t},\n\t\t\"& .MuiDivider-middle\": {\n\t\t\tmarginBottom: \"4px\",\n\t\t},\n\t\t\"& .MuiListItem-root\": {\n\t\t\tpadding: \"0px 16px\",\n\t\t},\n\t\t\"& .MuiCardContent-root\": {\n\t\t\tpaddingTop: \"0px\",\n\t\t\tpaddingBottom: \"5px\",\n\t\t},\n\t\t\"& .MuiIconButton-root:focus\": {\n\t\t\tbackgroundColor: \"rgba(0, 0, 0, 0)\",\n\t\t},\n\t},\n\theader: {\n\t\tpadding: \"10px\",\n\t},\n\tmedia: {\n\t\t//height: 0,\n\t\tpaddingTop: \"56.25%\", // 16:9\n\t\theight: \"max-content\",\n\t},\n\tlikeBar: {\n\t\theight: \"25px\",\n\t\tpaddingTop: \"0px\",\n\t\tmarginTop: \"8px\",\n\t\tmarginLeft: \"2px\",\n\t\tpaddingLeft: \"0px\",\n\t\tpaddingBottom: \"4px\",\n\t},\n\tcomments: {\n\t\tdisplay: \"flex\",\n\t\tpaddingTop: \"0px\",\n\t\tpaddingLeft: \"12px\",\n\t\tpaddingRight: \"0px\",\n\t},\n\tcomment_item_see_more: {\n\t\twidth: \"35%\",\n\t\tcursor: \"pointer\",\n\t},\n\tcomments_icon_see_more: {\n\t\theight: \"17px\",\n\t\twidth: \"17px\",\n\t\tpaddingTop: \"4px\",\n\t\tpaddingBottom: \"3px\",\n\t},\n\tcomments_icon: {\n\t\theight: \"30px\",\n\t\tpaddingLeft: \"0px\",\n\t\tpaddingTop: \"13px\",\n\t\tpaddingRight: \"8px\",\n\t\tpaddingBottom: \"0px\",\n\t},\n\tinline: {\n\t\tdisplay: \"inline\",\n\t\tfontWeight: \"600\",\n\t},\n\tavatar: {\n\t\theight: \"40px\",\n\t},\n\tlinks: {\n\t\ttextDecoration: \"none\",\n\t},\n}));\n\nconst SubscribePost = () => {\n\tconst classes = useStyles();\n\tconst { state } = useContext(UserContext);\n\n\tconst [data, setData] = useState([]);\n\tconst [showSend, setShowSend] = useState(false);\n\tconst [comment, setComment] = useState(\"\");\n\n\tuseEffect(() => {\n\t\taxios.get(SUB_POST_URL, config).then((res) => {\n\t\t\tconsole.log(res.data.posts);\n\t\t\tsetData(res.data.posts);\n\t\t});\n\t}, []);\n\n\tconst likePost = (id) => {\n\t\taxios.put(`http://localhost:5000/like`, { postId: id }, config)\n\t\t\t.then((result) => {\n\t\t\t\tconst newData = data.map((item) => {\n\t\t\t\t\tif (result.data._id === item._id) return result.data;\n\t\t\t\t\telse return item;\n\t\t\t\t});\n\t\t\t\tsetData(newData);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\tconst UnlikePost = (id) => {\n\t\taxios.put(`http://localhost:5000/Unlike`, { postId: id }, config)\n\t\t\t.then((res) => {\n\t\t\t\tconst newData = data.map((item) => {\n\t\t\t\t\tif (res.data._id === item._id) return res.data;\n\t\t\t\t\telse return item;\n\t\t\t\t});\n\t\t\t\tsetData(newData);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\tconst makeComment = (text, postId) => {\n\t\tsetComment(\"\");\n\t\taxios.put(`http://localhost:5000/comment`, { text, postId }, config)\n\t\t\t.then((result) => {\n\t\t\t\tconst newData = data.map((item) => {\n\t\t\t\t\tif (result.data._id === item._id) return result.data;\n\t\t\t\t\telse return item;\n\t\t\t\t});\n\t\t\t\tsetData(newData);\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\tconst deletePost = (postId) => {\n\t\taxios.delete(`http://localhost:5000/deletepost/${postId}`, config).then((res) => {\n\t\t\tconst newData = data.filter((item) => {\n\t\t\t\treturn item._id !== res.data;\n\t\t\t});\n\t\t\tsetData(newData);\n\t\t});\n\t};\n\n\treturn data.map((item) => (\n\t\t<div className=\"home\" key={item._id}>\n\t\t\t<Card className={classes.root}>\n\t\t\t\t<CardHeader\n\t\t\t\t\tclassName={classes.header}\n\t\t\t\t\tavatar={\n\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName={classes.avatar}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\tsrc={`data:${item.PhotoType};base64,${item.Photo}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t}\n\t\t\t\t\ttitle={\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName={classes.links}\n\t\t\t\t\t\t\tto={item.PostedBy._id !== state._id ? `/profile/${item.PostedBy._id}` : \"/profile\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{item.PostedBy.Name}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t}\n\t\t\t\t\tsubheader=\"September 14, 2016\"\n\t\t\t\t/>\n\n\t\t\t\t<CardMedia\n\t\t\t\t\tclassName={classes.media}\n\t\t\t\t\timage={`data:${item.PhotoType};base64,${item.Photo}`}\n\t\t\t\t\ttitle=\"Paella dish\"\n\t\t\t\t/>\n\n\t\t\t\t<CardActions className={classes.likeBar} disableSpacing>\n\t\t\t\t\t{item.Likes.includes(state._id) ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-label=\"Like\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tUnlikePost(item._id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FavoriteIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-label=\"Like\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlikePost(item._id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FavoriteBorderIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t\t<IconButton aria-label=\"comments\">\n\t\t\t\t\t\t<ChatBubbleOutlineIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</CardActions>\n\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant=\"subtitle2\" display=\"block\" gutterBottom>\n\t\t\t\t\t\t{item.Likes.length} Likes\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n\t\t\t\t\t\t{item.Body}\n\t\t\t\t\t</Typography>\n\t\t\t\t</CardContent>\n\n\t\t\t\t<Divider variant=\"middle\" />\n\n\t\t\t\t<List>\n\t\t\t\t\t{item.Comments.map((cmt) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem className={classes.comment_item} alignItems=\"flex-start\" key={cmt._id}>\n\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inline}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.links}\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcmt.PostedBy._id !== state._id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `/profile/${cmt.PostedBy._id}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"/profile\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{cmt.PostedBy.Name}\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t\t{\" â€” \"}\n\t\t\t\t\t\t\t\t\t\t\t{cmt.Text}\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{item.Comments.length === 0 ? (\n\t\t\t\t\t\t<ListItem alignItems=\"flex-start\" style={{ left: \"38%\" }}>\n\t\t\t\t\t\t\t<Typography variant=\"caption\" display=\"block\" gutterBottom>\n\t\t\t\t\t\t\t\tNo Comments yet\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{item.Comments.length > 3 && item.Comments.length !== 0 ? (\n\t\t\t\t\t\t<ListItem alignItems=\"flex-start\" className={classes.comment_item_see_more}>\n\t\t\t\t\t\t\t<Typography variant=\"caption\" display=\"block\" gutterBottom>\n\t\t\t\t\t\t\t\tSee all {item.Comments.length} comments\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<DoubleArrowIcon className={classes.comments_icon_see_more} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : null}\n\t\t\t\t</List>\n\n\t\t\t\t<Divider variant=\"middle\" />\n\n\t\t\t\t<CardContent className={classes.comments}>\n\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName={classes.avatar}\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tsrc=\"https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Avatar>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\trows={1}\n\t\t\t\t\t\tplaceholder=\"Add your comment...\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tvalue={comment}\n\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tsetComment(event.target.value);\n\t\t\t\t\t\t\tsetShowSend(true);\n\t\t\t\t\t\t\tif (event.target.value === \"\") setShowSend(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label=\"add to favorites\"\n\t\t\t\t\t\tclassName={classes.comments_icon}\n\t\t\t\t\t\tdisabled={!showSend}\n\t\t\t\t\t\tonClick={() => makeComment(comment, item._id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SendIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</div>\n\t));\n};\n\nexport default SubscribePost;\n"]},"metadata":{},"sourceType":"module"}