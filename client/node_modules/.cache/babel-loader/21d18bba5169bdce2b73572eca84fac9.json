{"ast":null,"code":"import _toConsumableArray from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */import React,{useEffect,useState,useContext}from\"react\";import{Link,useParams}from\"react-router-dom\";import axios from\"axios\";import{UserContext}from\"../App\";import{config}from\"../config/constants\";// Material-UI Components\nimport{makeStyles}from\"@material-ui/styles\";import Button from\"@material-ui/core/Button\";import Grid from\"@material-ui/core/Grid\";import IconButton from\"@material-ui/core/IconButton\";import CssBaseline from\"@material-ui/core/CssBaseline\";import Box from\"@material-ui/core/Box\";import Typography from\"@material-ui/core/Typography\";import Icon from\"@material-ui/core/Icon\";import Avatar from\"@material-ui/core/Avatar\";import Tabs from\"@material-ui/core/Tabs\";import Tab from\"@material-ui/core/Tab\";// General Styles\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{maxWidth:935,margin:\"auto\",padding:\"60px 20px 0\"},avatar_container:{margin:\"auto\"},avatar:{width:152,height:152},editButton:{marginLeft:20,backgroundColor:\"paleturquoise\"},settings:{}};});function TabPanel(props){var children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,[\"children\",\"value\",\"index\"]);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{p:3,children:children})}));}var UserProfilePage=function UserProfilePage(){var classes=useStyles();var _useState=useState(\"Posts\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];// to switch between different tabs\nvar _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useParams=useParams(),userid=_useParams.userid;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(state?!state.Following.includes(userid):null),_useState6=_slicedToArray(_useState5,2),showfollow=_useState6[0],setShowFollow=_useState6[1];useEffect(function(){axios.get(\"http://localhost:5000/user/\".concat(userid),config).then(function(res){setData(res.data);});},[]);var followUser=function followUser(){axios.put(\"http://localhost:5000/follow\",{followId:userid},config).then(function(result){dispatch({type:\"UPDATE\",payload:{Followers:result.data.Followers,Following:result.data.Following}});localStorage.setItem(\"user\",JSON.stringify(result.data));setData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{Followers:[].concat(_toConsumableArray(prevState.user.Followers),[result.data._id])})});});setShowFollow(false);});};var UnfollowUser=function UnfollowUser(){axios.put(\"http://localhost:5000/unfollow\",{unfollowId:userid},config).then(function(result){dispatch({type:\"UPDATE\",payload:{Followers:result.data.Followers,Following:result.data.Following}});localStorage.setItem(\"user\",JSON.stringify(result.data));setData(function(prevState){var newFollower=prevState.user.Followers.filter(function(item){return item!==result.data._id;});return _objectSpread(_objectSpread({},prevState),{},{user:_objectSpread(_objectSpread({},prevState.user),{},{Followers:newFollower})});});setShowFollow(true);});};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CssBaseline,{}),data?/*#__PURE__*/_jsxs(Box,{component:\"main\",className:classes.root,children:[/*#__PURE__*/_jsx(Box,{mb:\"44px\",children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:4,className:classes.avatar_container,children:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,style:{margin:\"auto\"},src:\"https://cc-media-foxit.fichub.com/image/fox-it-mondofox/e8c0f288-781d-4d0b-98ad-fd169782b53b/scene-sottacqua-per-i-sequel-di-avatar-maxw-654.jpg\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:8,children:[/*#__PURE__*/_jsx(Box,{clone:true,mb:\"20px\",children:/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:data.user?data.user.Name:\"Is Loading ...\"}),showfollow?/*#__PURE__*/_jsx(Button,{className:classes.editButton,variant:\"outlined\",onClick:function onClick(){return followUser();},children:\"Follow\"}):/*#__PURE__*/_jsx(Button,{className:classes.editButton,variant:\"outlined\",onClick:function onClick(){return UnfollowUser();},children:\"UnFollow\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.settings,children:/*#__PURE__*/_jsx(IconButton,{component:Link,to:\"#\",children:/*#__PURE__*/_jsx(Icon,{children:\"settings\"})})})]})}),/*#__PURE__*/_jsx(Box,{mb:\"20px\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"b\",{children:data.posts?data.posts.length:\"IsLoading...\"}),\" \",\"posts\"]})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"b\",{children:data.user?data.user.Followers.length:\"IsLoading...\"}),\" \",\"followers\"]})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"b\",{children:data.user?data.user.Following.length:\"IsLoading...\"}),\" \",\"following\"]})})]})}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"Siriwat Kunaporn\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"Bangkok Christian College\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"CU intania 96.\"})]})]})}),/*#__PURE__*/_jsxs(Tabs,{value:value,centered:true,onChange:function onChange(event,value){setValue(value);},TabIndicatorProps:{style:{transform:\"translateY(-70px)\",backgroundColor:\"#262626\"}},children:[/*#__PURE__*/_jsx(Tab,{label:\"Posts\",value:\"Posts\",icon:/*#__PURE__*/_jsx(Icon,{children:\"grid_on_outlined\"})}),/*#__PURE__*/_jsx(Tab,{label:\"IGTV\",value:\"IGTV\",icon:/*#__PURE__*/_jsx(Icon,{children:\"live_tv\"}),disabled:true}),/*#__PURE__*/_jsx(Tab,{label:\"Tagged\",value:\"Tagged\",icon:/*#__PURE__*/_jsx(Icon,{children:\"local_offer_outlined\"}),disabled:true})]}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:\"Posts\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[data.posts?data.posts.map(function(item){return/*#__PURE__*/_jsx(Grid,{item:true,xs:4,children:/*#__PURE__*/_jsx(\"img\",{alt:\"post\",style:{width:\"100%\",height:\"100%\"},src:\"data:\".concat(item.PhotoType,\";base64,\").concat(item.Photo)})},item.id);}):\"Is Loading ...\",/*#__PURE__*/_jsx(Grid,{item:true,xs:4,className:classes.post_box,children:/*#__PURE__*/_jsx(\"img\",{alt:\"post\",style:{width:\"100%\"},src:\"https://via.placeholder.com/500/f5f5f5\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,className:classes.post_box,children:/*#__PURE__*/_jsx(\"img\",{alt:\"post\",style:{width:\"100%\"},src:\"https://via.placeholder.com/500/f5f5f5\"})})]})})]}):\"Is Loading ...\"]});};export default UserProfilePage;","map":{"version":3,"sources":["/home/kalyan/Downloads/Instagram-Web-App-MERN-Stack-Clone-master/client/src/screens/UserProfile.js"],"names":["React","useEffect","useState","useContext","Link","useParams","axios","UserContext","config","makeStyles","Button","Grid","IconButton","CssBaseline","Box","Typography","Icon","Avatar","Tabs","Tab","useStyles","theme","root","maxWidth","margin","padding","avatar_container","avatar","width","height","editButton","marginLeft","backgroundColor","settings","TabPanel","props","children","value","index","other","UserProfilePage","classes","setValue","state","dispatch","userid","data","setData","Following","includes","showfollow","setShowFollow","get","then","res","followUser","put","followId","result","type","payload","Followers","localStorage","setItem","JSON","stringify","prevState","user","_id","UnfollowUser","unfollowId","newFollower","filter","item","Name","posts","length","event","style","transform","map","PhotoType","Photo","id","post_box"],"mappings":"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","sourcesContent":["/**\n *\n * @author Anass Ferrak aka \" ThedevilA \" <an.ferrak@gmail.com>\n * GitHub repo: https://github.com/ThedevilA/Instagram-Web-App-MERN-Stack-Clone\n *\n */\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { UserContext } from \"../App\";\nimport { config } from \"../config/constants\";\n// Material-UI Components\nimport { makeStyles } from \"@material-ui/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\n\n// General Styles\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tmaxWidth: 935,\n\t\tmargin: \"auto\",\n\t\tpadding: \"60px 20px 0\",\n\t},\n\tavatar_container: { margin: \"auto\" },\n\tavatar: { width: 152, height: 152 },\n\teditButton: {\n\t\tmarginLeft: 20,\n\t\tbackgroundColor: \"paleturquoise\",\n\t},\n\tsettings: {},\n}));\n\nfunction TabPanel(props) {\n\tconst { children, value, index, ...other } = props;\n\treturn (\n\t\t<div role=\"tabpanel\" hidden={value !== index} {...other}>\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\n\t\t</div>\n\t);\n}\n\nconst UserProfilePage = () => {\n\tconst classes = useStyles();\n\tconst [value, setValue] = useState(\"Posts\"); // to switch between different tabs\n\tconst { state, dispatch } = useContext(UserContext);\n\tconst { userid } = useParams();\n\tconst [data, setData] = useState(null);\n\tconst [showfollow, setShowFollow] = useState(state ? !state.Following.includes(userid) : null);\n\n\tuseEffect(() => {\n\t\taxios.get(`http://localhost:5000/user/${userid}`, config).then((res) => {\n\t\t\tsetData(res.data);\n\t\t});\n\t}, []);\n\n\tconst followUser = () => {\n\t\taxios.put(`http://localhost:5000/follow`, { followId: userid }, config).then((result) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"UPDATE\",\n\t\t\t\tpayload: { Followers: result.data.Followers, Following: result.data.Following },\n\t\t\t});\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(result.data));\n\t\t\tsetData((prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...prevState.user,\n\t\t\t\t\t\tFollowers: [...prevState.user.Followers, result.data._id],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetShowFollow(false);\n\t\t});\n\t};\n\n\tconst UnfollowUser = () => {\n\t\taxios.put(`http://localhost:5000/unfollow`, { unfollowId: userid }, config).then((result) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"UPDATE\",\n\t\t\t\tpayload: { Followers: result.data.Followers, Following: result.data.Following },\n\t\t\t});\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(result.data));\n\t\t\tsetData((prevState) => {\n\t\t\t\tconst newFollower = prevState.user.Followers.filter((item) => item !== result.data._id);\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...prevState.user,\n\t\t\t\t\t\tFollowers: newFollower,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetShowFollow(true);\n\t\t});\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<CssBaseline />\n\t\t\t{data ? (\n\t\t\t\t<Box component=\"main\" className={classes.root}>\n\t\t\t\t\t<Box mb=\"44px\">\n\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t<Grid item xs={4} className={classes.avatar_container}>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tclassName={classes.avatar}\n\t\t\t\t\t\t\t\t\tstyle={{ margin: \"auto\" }}\n\t\t\t\t\t\t\t\t\tsrc=\"https://cc-media-foxit.fichub.com/image/fox-it-mondofox/e8c0f288-781d-4d0b-98ad-fd169782b53b/scene-sottacqua-per-i-sequel-di-avatar-maxw-654.jpg\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={8}>\n\t\t\t\t\t\t\t\t<Box clone mb=\"20px\">\n\t\t\t\t\t\t\t\t\t<Grid container alignItems=\"center\">\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"h5\">\n\t\t\t\t\t\t\t\t\t\t\t{data.user ? data.user.Name : \"Is Loading ...\"}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t{showfollow ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.editButton}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => followUser()}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tFollow\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.editButton}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => UnfollowUser()}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tUnFollow\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settings}>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton component={Link} to=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon>settings</Icon>\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t<Box mb=\"20px\">\n\t\t\t\t\t\t\t\t\t<Grid container spacing={4}>\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b>{data.posts ? data.posts.length : \"IsLoading...\"}</b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\tposts\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.user\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? data.user.Followers.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"IsLoading...\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\tfollowers\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.user\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? data.user.Following.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"IsLoading...\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</b>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\tfollowing\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Siriwat Kunaporn</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Bangkok Christian College</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">CU intania 96.</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tcentered\n\t\t\t\t\t\tonChange={(event, value) => {\n\t\t\t\t\t\t\tsetValue(value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tTabIndicatorProps={{\n\t\t\t\t\t\t\tstyle: { transform: \"translateY(-70px)\", backgroundColor: \"#262626\" },\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab label=\"Posts\" value=\"Posts\" icon={<Icon>grid_on_outlined</Icon>} />\n\t\t\t\t\t\t<Tab label=\"IGTV\" value=\"IGTV\" icon={<Icon>live_tv</Icon>} disabled />\n\t\t\t\t\t\t<Tab label=\"Tagged\" value=\"Tagged\" icon={<Icon>local_offer_outlined</Icon>} disabled />\n\t\t\t\t\t</Tabs>\n\t\t\t\t\t<TabPanel value={value} index=\"Posts\">\n\t\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t\t{data.posts\n\t\t\t\t\t\t\t\t? data.posts.map((item) => (\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={4} key={item.id}>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"post\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\", height: \"100%\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={`data:${item.PhotoType};base64,${item.Photo}`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t: \"Is Loading ...\"}\n\n\t\t\t\t\t\t\t<Grid item xs={4} className={classes.post_box}>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"post\"\n\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t\t\tsrc=\"https://via.placeholder.com/500/f5f5f5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={4} className={classes.post_box}>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt=\"post\"\n\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t\t\tsrc=\"https://via.placeholder.com/500/f5f5f5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</TabPanel>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t\"Is Loading ...\"\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n};\n\nexport default UserProfilePage;\n"]},"metadata":{},"sourceType":"module"}